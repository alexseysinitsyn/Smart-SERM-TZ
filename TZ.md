You need to create a module that allows generating static pages of the site (the pages containing the text).

The module should use Yii DAO, therefore, the model data should be stored in the database.

To differ the “static pages generated by the module” from other site pages the first will be called "s-page".

S-page model

The s-page model should have the following attributes:

id
author
slug (unique human-readable address, that allows identify the page), may consist [a-zA-Z0-9-], for example «contact»
category
title
tags
date of s-page creation
date of s-page modification (updated when changes are made, initially equal to creation date)
rating
status (access level) – available to all users, available to authorized users, available only to administrators, available by link
short content (may contain html)
content (may contain html)


Category model

The category should have the following attributes:

id
id of parent category (-1, if this is category of 0 nesting level)
unique semantic address of category (slug)
displayed title
status (available to all users, available to authorized users, available only to administrators, available by link)
Page routing

S-page should have a route like page/$name.html, where $name is the slug of s-page.
The links to category page should be page/category/$catname.html, where $catname is the category slug. When using page-by-page navigation the routes should be like page/category/$catname/$page.html, where $catname is the category slug, $page is the current page number of page-by-page output (for example, page/category/other/2.html should correspond to the second page of s-pages list of category other).
The tag page should have a route like page/tag/$tagname.html, where $tagname is the tag slug. The tag page must have the same functionality as the category page except that there should be s-pages that have this tag.
Views of category and s-page

If category has subcategories, they must be listed on the category page. Below there should be s-pages belonging to this category. The list should be paginated (you need to use yii\data\Pagination, the number of s-pages per page is 10). Also category page must have controls to change the order of articles (sort by date (new first, old first), sort by title, sort by update date, sort by rating). The list should contain the title of s-pages, their update date and short content. The list should not have hidden s-pages and s-pages that not available to the current user.

View of s-page should display:

s-page title
date of creation
tags
content
article rating widget (described below)
When displaying tags on the s-page, they must be listed by comma. Also they must be clickable, and links should lead to appropriate address for the tag (see «Page routing»). When displaying the s-page it is necessary to check user access rights to current page.

Rating widget

At the end of the s-page content you must show article rating widget. It should look like this:



The widget should display the current article rating (from 1 to 5, where number of gold stars corresponds to the rating). When hovering the star all stars after it should be different color (for example, gray).



The cursor is over the second star

The rating should be calculated based on the average score from all user votes. For example: there are two votes for the article – 3 and 5, so the average score will be 4 and the rating should have 4 gold stars.

When clicking on the corresponding star, you should to send a request to the server with the rating specified by user (for example, if there was a click on the second star, then rating is 2). After sending the voting result it is necessary to show message that «The vote has been accepted» or message with error. If the vote is accepted, the widget view is remains the same as it was when voting (i.e. if there was a click on the second star, three other stars must be gray regardless on hovering of mouse cursor).

When user votes, it is necessary to check on the server side that this user votes for the first time (you can store IP-addresses of users, who voted on the current page, and check that the IP of the voter is not in the list of those who voted for this s-page). Example on the pure CSS. Its use is allowed.

S-page management interface

You can generate s-page management interface using Gii and then adapt it to the requirements of the task.

Only a user with admin permissions must have access to this interface. As part of the test task, you can check the username: if username == «admin», then user has access to s-pages management. Management interface homepage should contain a list of s-pages. This list should be displayed as a table and should have page-by-page navigation (10 s-pages per page and page navigation below). In the right column of the table there should be links to actions for current s-page: edit, delete. When clicking the corresponding action should be performed. When editing the administrator must be able to change any page data (including status) and reset current article rating. On the creating and updating pages there should be drop-down lists for selecting category and status.

Requirements and recommendations for performing the task
Database

The database can have any title
Tables in the database must be created using migrations. At the root of the site there should be a migrations folder with all migrations
The database must have following tables with fields (there may be more tables, but the ones listed below are required):
article

id -> integer (primaryKey)
title -> string
slug -> string
author -> string
category_id -> integer
date_create -> date
date_update -> date
status -> string
content -> text
short_content -> text
rating -> integer
category

id -> integer (primaryKey)
title -> string
id_parent -> integer
slug -> string
status -> string
tag

id -> integer (primaryKey)
title -> string
slug -> string
Authorization

The page for authorization on the site must have a route /site/login.html. There should be text fields with the following ids:

loginform-username – to enter login
loginform-password – to enter password
The following data should be used for authorization as an administrator:

Login – admin
Password – admin
The following data must be used for authorization as a user:

Login – demo
Password – demo
You can use the standard solution of the basic version of the framework.

Admin panel

The list of the s-pages (as a table) in the admin panel should be located on the page /admin/article/index.html.

Also on this page should be elements:

<h1> header with the text Articles
Link with the class btn-success that lead to the page /admin/article/create.html
In the table in the rightmost column for each s-page should be links (<a> tags) to the following pages:
/admin/article/update.html?id=1 – for editing s-page with id=1
/admin/article/delete.html?id=1 – link to delete s-page with id=1
Pagination block with class pagination (after table)
The list of the categories (as a table) in the admin panel should be located on the page /admin/category/index.html.

Also on this page should be elements:

<h1> header with the text Categories
Link with the class btn-success that lead to the page /admin/category/create.html
In the table in the rightmost column for each category should be links (<a> tags) to the following pages:
/admin/category/update.html?id=1 – for editing category with id=1
/admin/category/delete.html?id=1 – link to delete category with id=1
The list of the tags (as a table) in the admin panel should be located on the page /admin/tag/index.html.

Also on this page should be elements:

<h1> header with text Tags
Link with the class btn-success that lead to the page /admin/tag/create.html
In the table in the rightmost column for each tag should be links (<a> tags) to the following pages:
/admin/tag/update.html?id=1 – for editing tag with id=1
/admin/tag/delete.html?id=1 – link to delete tag with id=1
S-page creating

The page for s-page creating must have a route /admin/article/create.html.

This page should contain elements with the following ids:

article-author – field for specifying the author of the s-page
article-title – field for the title
article-slug – field for the s-page slug
article-content – text area to add the content of the s-page
article-short_content – text area for adding the short content of the s-page
article-rating – field to specify the s-page rating
article-category_title – drop-down list with the categories. Note: the category titles must be inside the <option> tags of the category list
article-tags – drop-down list of the tags with multiple choice (multiple attribute)
article-status – drop-down list to select the s-page status (access level). Important: the options in the status list should be in the following order:
s-page is available to all users (guest)
available to authorized users (user)
available only to administrators (admin)
s-page is available by link (link)
All of the above elements must be in the form with id="w0"

S-page editing

The page for s-page editing must have a route /admin/article/update.html?id=1, where id is the id of the s-page (the sequence number in the database table).

The editing page must contain elements with the same ids as the s-page creation page (see above).

The elements must be in the form with id="w0"

Category creating

The page for category creating should have a route /admin/category/create.html.

This page must have elements with the following ids:

category-title – field for the category title
category-slug – field for the slug of the category
The above fields must be in the form with id="w0"

Tag creating

The page for tag creating must have a route /admin/tag/create.html.

On this page must be elements with the following ids:

tag-title – field for the tag title
tag-slug – field for the slug of the tag
The above fields must be in the form with id="w0"

Category page

The category page must have links to sort the s-pages by title, rating, creation date, and update date.

Links for sorting should look like /page/category/other.html?sort=title (sort by title from A to Z) or /page/category/other.html?sort=-title (sort by title from Z to A), where other is the category title.

Rating widget

We recommend using an example of this rating. Note that in the html code, the stars are in reverse order, that is, when you hover over the fourth star, the pseudo-element :before is added the second, third, fourth, and fifth stars in html code. You must use the reverse order of the stars – this is necessary for the correct rating checking.

To make the star gold without hovering (to display the average rating of the article and the user's vote after he voted), use the class star-active.

The rating widget must be located in the block with id="rating". There should be 5 <span> elements inside it with a star in each.

Requirements to the solution loading

You should load a solution from repository and there should be only one folder (basic) with a project.
Load root folder only with necessary files, without vendor, runtime and etc.
There should be a migrations folder with all migrations and a modules folder in the root of the project.
The modules folder should contain the page module, which contains the Module.php file with module settings.
